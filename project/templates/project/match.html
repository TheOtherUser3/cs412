<!-- 
File: match.html
Author: Dawson Maska (dawsonwm@bu.edu), 12/6/2025
Description: The match page where you see details about a past match
-->

{% extends "project/base.html" %}
{% block content %}

<div class="snake-page">

    <h1 class="match-title">
        {{ match.bot1.name }} vs {{ match.bot2.name }}
    </h1>

    <div class="match-card">

        <div class="match-section">
            <div class="match-row">
                <span class="label">Bots</span>
                <span class="value">
                    {{ match.bot1.name }} vs {{ match.bot2.name }}
                </span>
            </div>

            <div class="match-row">
                <span class="label">Board</span>
                <span class="value">{{ match.board.name }}</span>
            </div>

            <div class="match-row">
                <span class="label">Turns</span>
                <span class="value">{{ match.total_turns }}</span>
            </div>

            <div class="match-row">
                <span class="label">Apples</span>
                <span class="value">
                    {{ match.apples_a }} / {{ match.apples_b }}
                </span>
            </div>

            <div class="match-row winner">
                <span class="label">Winner</span>
                <span class="value">
                    {% if match.winner == 1 %}
                        {{ match.bot1.name }}
                    {% elif match.winner == 2 %}
                        {{ match.bot2.name }}
                    {% else %}
                        TIE
                    {% endif %}
                </span>
            </div>
        </div>

        <div class="match-actions">
            <a href="{% url 'matches' %}" class="snake-button secondary">
                Back to Matches
            </a>

            <a href="{% url 'match_replay' match.pk %}"
               class="snake-button primary">
                Replay Match
            </a>

            <a href="{% url 'delete_match' match.pk %}" class="btn-danger">Delete</a>
        </div>

    </div>

    <div class="bot-list">
        <div class="bot-card">
            <div class="bot-card-header">
                <!-- Apparently this is the way you have to access django inside of CSS! -->
                <h2 class="bot-name" style="--bot-color: {{ match.bot1.color }}">{{ match.bot1.name }}</h2>

                <!-- Placeholder for future actions -->
                <div class="bot-actions">
                    <a href="{% url 'update_bot' match.bot1.pk %}" class="btn-small secondary">
                        Edit
                    </a>
                    <a href="{% url 'delete_bot' match.bot1.pk %}" class="btn-small danger">
                        Delete
                    </a>
                </div>

                <div class="bot-stats">
                    <div class="stat"><span>Greediness</span><strong>{{ match.bot1.greediness }}</strong></div>
                    <div class="stat"><span>Caution</span><strong>{{ match.bot1.caution }}</strong></div>
                    <div class="stat"><span>Circliness</span><strong>{{ match.bot1.circliness }}</strong></div>
                    <div class="stat"><span>Introversion</span><strong>{{ match.bot1.introversion }}</strong></div>
                </div>
                
                <div class="stat chaos centered">
                    <span>Chaos</span><strong>{{ match.bot1.chaos }}</strong>
                </div>

            </div>
        </div>

        <div class="bot-card">
            <div class="bot-card-header">
                <!-- Apparently this is the way you have to access django inside of CSS! -->
                <h2 class="bot-name" style="--bot-color: {{ match.bot2.color }}">{{ match.bot2.name }}</h2>

                <!-- Placeholder for future actions -->
                <div class="bot-actions">
                    <a href="{% url 'update_bot' match.bot2.pk %}" class="btn-small secondary">
                        Edit
                    </a>
                    <a href="{% url 'delete_bot' match.bot2.pk %}" class="btn-small danger">
                        Delete
                    </a>
                </div>

                <div class="bot-stats">
                    <div class="stat"><span>Greediness</span><strong>{{ match.bot2.greediness }}</strong></div>
                    <div class="stat"><span>Caution</span><strong>{{ match.bot2.caution }}</strong></div>
                    <div class="stat"><span>Circliness</span><strong>{{ match.bot2.circliness }}</strong></div>
                    <div class="stat"><span>Introversion</span><strong>{{ match.bot2.introversion }}</strong></div>
                </div>
                
                <div class="stat chaos centered">
                    <span>Chaos</span><strong>{{ match.bot2.chaos }}</strong>
                </div>

            </div>
        </div>
    </div>

</div>


{% endblock %}
